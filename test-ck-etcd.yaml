default-base: ubuntu@22.04/stable
applications:
  easyrsa:
    charm: easyrsa
    channel: stable
    revision: 55
    resources:
      easyrsa: 2
    num_units: 1
    to:
    - "0"
    annotations:
      bundleURL: /home/mateo/Workspace/Canonical/k8s-operator/.tox/integration/tmp/pytest/test-etcd-g8f10/bundles/test-bundle-etcd.yaml
    constraints: arch=amd64
  etcd:
    charm: etcd
    channel: stable
    revision: 760
    resources:
      core: 0
      etcd: 3
      snapshot: 0
    num_units: 1
    to:
    - "1"
    annotations:
      bundleURL: /home/mateo/Workspace/Canonical/k8s-operator/.tox/integration/tmp/pytest/test-etcd-g8f10/bundles/test-bundle-etcd.yaml
    constraints: arch=amd64
    storage:
      data: loop,1024M
  k8s:
    charm: local:k8s-0
    channel: stable
    num_units: 3
    to:
    - "2"
    - "4"
    - "6"
    options:
      datastore: etcd
    annotations:
      bundleURL: /home/mateo/Workspace/Canonical/k8s-operator/.tox/integration/tmp/pytest/test-etcd-g8f10/bundles/test-bundle-etcd.yaml
    constraints: arch=amd64
  k8s-worker:
    charm: local:k8s-worker-0
    channel: stable
    num_units: 2
    to:
    - "3"
    - "5"
    annotations:
      bundleURL: /home/mateo/Workspace/Canonical/k8s-operator/.tox/integration/tmp/pytest/test-etcd-g8f10/bundles/test-bundle-etcd.yaml
    constraints: arch=amd64
machines:
  "0":
    constraints: arch=amd64
  "1":
    constraints: arch=amd64
  "2":
    constraints: arch=amd64
  "3":
    constraints: arch=amd64
  "4":
    constraints: arch=amd64
  "5":
    constraints: arch=amd64
  "6":
    constraints: arch=amd64
relations:
- - k8s:k8s-cluster
  - k8s-worker:cluster
- - etcd:certificates
  - easyrsa:client
- - etcd:db
  - k8s:etcd
